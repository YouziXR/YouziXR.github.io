let subject = `require.context` let pack = `webpack`

## 前言

经常看到大型项目中使用`require.context`来批量引入文件，最近刚好在写组件化 icon，用到了这个方法，写一篇 blog 来记录一下。

### require.context 是什么

这是一个 webpack 的 API，通过执行 require.context 函数来获取指定的上下文，主要用于实现自动化导入模块；一般会遍历指定文件夹下的指定文件，实现自动导入，省去了每次都要调用`import`方法。

### 使用场景

通用的场景是这样的：当发现多个模块在一个文件夹下，而且需要机械式的写引入语句时，都可以使用；实际场景有动态引入路由，动态引入图标文件等等。

![测试图片](../img/in-post/post-require-context/javascript-java.jpg)

### require.context 函数

看下面这段代码：

```javascript
/**
 * 批量导入文件
 * @param {string} directory 文件目录
 * @param {bool} useSubdirectories 是否读取子目录
 * @param {regular expression} regExp 正则式匹配文件名和后缀
 * @return: {function} with 3 properties, resolve, keys, id
 */
let requireContextFunc = require.context(directory, useSubdirectories = true, regExp = /^\.\/.*$/);
typeof requireContextFunc === 'function'; // true
requireContextFunc = (req) => {
  // req is an element of keys
  return `req对应的一个文件的模块`;
  // 通俗点说就是平常我们写js代码中export出来的东西
}
requireContextFunc.resolve = (req) => {
  // req is an element of keys
    return `req匹配到的文件的完整的相对路径`;
}
requireContextFunc.keys = () {
  return `Array, 所有匹配到的文件名组成的数组`;
}
requireContextFunc.id = `String, 执行环境的id`;
```
